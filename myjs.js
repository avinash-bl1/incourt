function func_MakeHelpBtn(){$("<div/>",{class:"HelpDiv HelpDivButton",onClick:"func_ActiHelp(this);"}).html('<u style="color: yellow">H</u>elp Me!').appendTo("body"),$(".card-head header").after($(".HelpDiv.HelpDivButton"))}function func_ActiHelp(){Summary=(""!=$("[name=url]")[1].value.trim()?$("[name=url]")[1].value+"\n":"")+(""!=$("#title").val().trim()?$("#title").val()+"\n":"")+(""!=$("#description").val().trim()?$("#description").val():"")+(""!=$("#token-input-topic").val().trim()?"\n# "+$("#token-input-topic").val():""),$("#id_news").val(Summary).change(),$(".HelpDiv").fadeOut("fast",function(){$(".WordData_Container").fadeIn(function(){$(".WordData_Box").fadeIn(400,function(){$("#id_news").focus()})})})}function func_MakeDataCapture(){$("<div/>",{id:"WD_Container",class:"WordData_Container",style:"display: none"}).appendTo("body").keydown(function(e){10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey||func_DataCaptureSubmit("populate"),27==e.which&&func_DataCaptureSubmit(this),65==e.keyCode&&e.altKey&&Func_AbbreviateNews(),85==e.keyCode&&e.altKey&&NeedToUndo&&Func_PushUndo()}),$("<div/>",{id:"WD_Box",class:"WordData_Box",style:"display: none"}).appendTo(".WordData_Container"),$("<form/>",{id:"WD_Box__form",name:"WD_Box__form",class:"form-group",action:"",method:""}).appendTo(".WordData_Box");var e=$("#WD_Box__form");e.html("<h4>News</h4>"),$("<textarea/>",{rows:"12",id:"id_news",name:"news",class:"form-control",autofocus:"autofocus",placeholder:"Para 1: URL, must start with protocol else one will be applied\nPara 2: Title, you know the limits, TitleCasing etc. whatever...\nPara 3: News Description, oh come on spoonfed!\n\nTLDR;\nBrains and common-sense are essential coz system is equipped here.\n\nsuper-TLDR;\nWelcome to make mistakes."}).appendTo(e),$("<a/>",{id:"populate",class:"btn btn-success",onClick:'func_DataCaptureSubmit("populate");'}).html('[Ctrl+Ent]<span class="d-none d-md-inline"> Populate</span>').appendTo(e).css("text-transform","initial"),$("<a/>",{class:"btn btn-warning",id:"abbreviate",onClick:"Func_AbbreviateNews()"}).html('[Alt+A]<span class="d-none d-md-inline"> Abbreviate</span>').appendTo(e).css("text-transform","initial"),$("<a/>",{id:"rollback",class:"btn btn-outline-secondary",onClick:'func_DataCaptureSubmit("");'}).html('[Esc]<span class="d-none d-md-inline"> Cancel</span>').appendTo(e).css("text-transform","initial")}function func_DataCaptureSubmit(e){"populate"===e&&($("[name=url]").removeAttr("onchange"),func_Populate(),$("[name=url]").attr("onchange","func_AutoSelectPublisher()")),$(".WordData_Box").fadeOut(300,function(){$(".WordData_Container").fadeOut(100,function(){$(".HelpDiv").fadeIn(100,function(){$("#title").focus()})})})}function func_Populate(){if(news=$("#id_news").val(),NewsDetail=news.split(/\n/),NewsDetail.length<3)func_alert("<b>Err...Incomplete News</b><br/>How can I populate it?",2400);else for(var e=0;e<NewsDetail.length;e++)void 0!==NewsDetail[e]&&""!==NewsDetail[e]||(func_alert("<b>Err...Incomplete News</b><br/>How can I populate it?",2400),e=NewsDetail.length);HashText=$.grep(NewsDetail,function(e,t){return e.match("^#","")},!1),HashText=0<HashText.length?HashText.join(",").replace(/#\s?/g,"").replace(/\s{1,}/gm," ").replace(/\s?,\s?/gm,",").trim():"",NewsDetail=$.grep(NewsDetail,function(e,t){return e.match("^#","")},!0),RegExp("\\.$","g").test(NewsDetail[2])||(NewsDetail[2]+=".");for(var t=3;t<NewsDetail.length;t++)void 0===NewsDetail[t]||""==NewsDetail[t]||(NewsDetail[2]+=" "+(RegExp("\\.$","g").test(NewsDetail[t])?NewsDetail[t]:NewsDetail[t]+="."));NewsDetail.splice(3);for(var a=0;a<NewsDetail.length;a++)NewsDetail[a]=Func_TrimAndCrisp(NewsDetail[a]);NewsDetail[0]=NewsDetail[0].match("^(https?)(?:://)","gi")?NewsDetail[0]:"http://"+NewsDetail[0],$("input#regular1").val(NewsDetail[0]).change(),titlestr=function(){return str=Func_RegexReplace(NewsDetail[1].replace(/(?:^|\s)\w/g,function(e){return e.toUpperCase()})),str},$("input#title").val(titlestr).change(),$("textarea#description").val(Func_RegexReplace(NewsDetail[2],"vardesc")).change(),$("#meta_title").val($("#title").val().replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'"<>,.\/? ])+/g,"-").toLowerCase()).change(),$("#title_tag").val($("#title").val()).change(),$("#meta_des").val($("#description").val()).change(),countTitle(),func_BL_CountTitle(),words=$("#description").val().trim().split(" ").length,max=60,words>max?$("#characterLeftDesc").text(max-words+" extra words."):$("#characterLeftDesc").text(max-words+" words left"),func_BL_CountDesc(),$("#token-input-topic").val(HashText),func_AutoSelectPublisher()}function func_BL_CountTitle(){words=$("#title").val().length,max=75,words>max?$("input#title").css({transition:"background-color 0s linear 0s",background:"#FFE6E6"}):$("input#title").css({transition:"",background:""})}function func_BL_CountDesc(){words=$("textarea#description").val().trim().split(" ").length,max=60,words>max?$("textarea#description").css({transition:"background-color 0s linear 0s",background:"#FFE6E6"}):$("textarea#description").css({transition:"",background:""})}function func_TitleCBtn(){$("<div/>",{id:"caseConvert"}).appendTo("body"),$("#caseConvert").css({color:"rgb(85, 85, 85)",padding:"1px 1rem 0px","border-radius":"0.25em",background:"rgba(255, 255, 0, 0.1)","box-shadow":"rgba(0, 0, 0, 0.33) 0px 1px 3px 0px",cursor:"pointer",font:"14px/32px Roboto, sans-serif",display:"inline-block",float:"right","margin-top":"5px"}).hover(function(){$(this).css({background:"rgba(255, 255, 0, 0.2)","box-shadow":"0 3px 8px 0 rgba(0, 0, 0, 0.38)"})},function(){$(this).css({background:"rgba(255, 255, 0, 0.1)","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.33)"})}).html("TitleCase"),$('LABEL[FOR="title"]').after($("#caseConvert")),$("#caseConvert").click(func_TitleConvert)}function func_TitleConvert(){str=$("#title").val().replace(/(?:^|\s)\w/g,function(e){return e.toUpperCase()}),$("#title").val(str).change()}function func_InitialCatSelect(){$(".input-field.col.s12.check-box-inline p").eq(1).after($('<hr style="margin:.5em 0" />')),countCategory=$("[name^=category]").length;for(var e=0;e<countCategory+1;e++)GetThisValue=".input-field.col.s12.check-box-inline p:nth-of-type("+e+") label",e<countCategory?$(GetThisValue).append("&nbsp;&nbsp;&nbsp;&nbsp;(c+s+"+e+")"):$(GetThisValue).append("&nbsp;&nbsp;&nbsp;&nbsp;(c+s+0)");$("#cat_1").prop("checked",!0).change(),$("#cat_4").prop("checked",!0).change(),$("#cat_select").val(1).change()}function func_SelectCategoryFromKeyboard(t){function e(e,t,a){console.log("RangeEnd: ",a);for(var n=t;n<a+1;n++)CatUnset="#cat_"+n,$(CatUnset).prop("checked",!1).change();CatSet="#cat_"+e,$(CatSet).prop("checked",!0).change(),1!=e&&2!=e||$("#cat_select").val(e).change()}arr=CatMapArray.filter(function(e){return!!~e.indexOf(t)}),SelCatChosen=arr[0][1],CountCats=$("[name^=category]").length,LastCatSeqValue=parseInt($("[name^=category]").eq(CountCats-1).attr("value"),10),0==SelCatChosen?e(SelCatChosen,0,0):0<SelCatChosen&&SelCatChosen<3?e(SelCatChosen,1,2):3<=SelCatChosen&&e(SelCatChosen,3,LastCatSeqValue),func_CatSelError()}function func_CatSelError(){$("#cat_select").val()?$("#cat_select").css({background:"",color:""}):$("#cat_select").css({background:"orangered",color:"white"})}function func_PubSelError(){$("[name=publisher_id]").val()?$("[name=publisher_id]").css({background:"",color:""}):$("[name=publisher_id]").css({background:"orangered",color:"white"})}function func_Sequencify(){Func_SeqInputGroups(),Func_RePosition()}function Func_SeqInputGroups(e){$(".page .col-md-8").attr("panel","LEFTPANEL").removeClass("col-md-8").addClass("col-md-9"),$(".page .col-md-4").attr("panel","RIGHTPANEL").removeClass("col-md-4").addClass("col-md-3"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(2)').attr("seq","TITLE"),$('[SEQ="TITLE"] input').attr("placeholder","TITLE"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(3)').attr("seq","PUBLISHER"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(4)').attr("seq","HASHTAGS"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(5)').attr("seq","URL"),$('[SEQ="URL"] input').attr("placeholder","URL"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(6)').attr("seq","ATTACH_6"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(7) input').attr("placeholder","please enter URL of the video here..."),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(7)').attr("seq","ATTACH_7"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(7) + DIV').attr("seq","ATTACH_8"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(7) + DIV + DIV').attr("seq","ATTACH_9"),$('[panel="LEFTPANEL"] .card-body > .form-group:nth-of-type(10)').attr("seq","NEWSDESCRIPTION"),$('[SEQ="NEWSDESCRIPTION"] textarea').attr("placeholder","NEWS DETAIL"),$("<div/>",{seq:"ATTACHMENT"}).appendTo("body"),$('[seq="ATTACH_6"]').appendTo('[seq="ATTACHMENT"]'),$('[seq="ATTACH_7"]').appendTo('[seq="ATTACHMENT"]'),$('[seq="ATTACH_8"]').appendTo('[seq="ATTACHMENT"]'),$('[seq="ATTACH_9"]').appendTo('[seq="ATTACHMENT"]'),$('[seq="HASHTAGS"]').after($('[seq="ATTACHMENT"]'))}function Func_RePosition(e){$('input[name="_token"]').after($('[seq="URL"]')),$('[seq="TITLE"]').after($('[seq="NEWSDESCRIPTION"]')),$('[seq="NEWSDESCRIPTION"]').after($('[seq="ATTACHMENT"]')),$('label[for="pub_select"]').html("Publisher"),$("#topic + label").html("#Tags")}function Func_TagSubmit(e){$("#token-input-topic").keydown(function(e){10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey||setTimeout(function(){func_alert("Saving News",1300),setTimeout(function(){$("#token-input-topic").closest("form").submit()},1e3)},0)})}function func_alert(e,t,a,n){void 0===t&&(t=300),void 0===a&&(a="#F5DA81"),void 0===n&&(n="#000"),$("#myalertwindow".length)&&$("#myalertwindow").remove(),box=$("<div/>",{id:"myalertwindow",class:"text-center"}).css({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)","border-radius":".25em",border:"5px solid #fff",padding:"1.25em 3em","font-size":"1.15em","font-weight":"400","background-color":a,color:n,"box-shadow":"0 .5em 1em rgba(0, 0, 0, .4)","text-shadow":"0 0 .5px rgba(0, 0, 0, .25)","z-index":"99000000"}).appendTo("body").html(e),box.fadeIn(300).delay(t).fadeOut(300,function(){box.remove()})}$.getScript("http://localhost/incourt/global-vars.js"),$(function(){func_Sequencify(),func_MakeHelpBtn(),func_MakeDataCapture(),func_ActiHelp(),$(".attachmentType").val(function(e){return $(".attachment-images").removeClass("hide"),$(".attachment-url input").prop("required",!1),$(".gallery_opner").removeClass("hide"),$(".attachment-images input").prop("required",!0),$(".attachment-url").hasClass("hide")||$(".attachment-url").addClass("hide"),"images"}).change(),func_TitleCBtn(),func_InitialCatSelect(),Func_TagSubmit(),$("#cat_select").change(func_CatSelError),$('[name="publisher_id"]').change(func_PubSelError),$("#title").on("keypress keyup change blur",func_BL_CountTitle),$("#description").on("keypress keyup change blur",func_BL_CountDesc),$(window).keydown(function(e){47<e.keyCode&&e.keyCode<=59&&e.ctrlKey&&e.shiftKey&&func_SelectCategoryFromKeyboard(e.keyCode),72==e.keyCode&&e.altKey&&func_ActiHelp()}),$('.time-mask#pub[name="pub_time"]').keydown(function(e){10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey||setTimeout(function(){$("#token-input-topic").closest("form").submit()},300)}),$(".gallery_opner").click(function(){func_alert("Face-lifting gallery."),IsGalleryManaged?$(".ImageGallery .img-container .gallery").css("display",""):setTimeout(function(){func_BetterGallery()},1)}),$("#draft_button").remove()});
$("[name=url]").attr("onchange","func_AutoSelectPublisher()");var ObjAllPublication={};function func_AutoSelectPublisher(){var s=$("<a/>").addClass("tempPubFilter").prop("href",$("[name=url]")[1].value).prop("hostname");$("a.tempPubFilter").remove();"dnaindia"==(s=s.match(/^(?:www\.)?(\w*)\.(\w*)/)[1])&&(s="dna"),$.each(ObjAllPublication,function(e,a){return shortPublisherSiteName=s.substring(0,8),e.match(s,"/gi")?($("[name=publisher_id]").val(a).change(),func_alert('<span class="h5">Publisher: </span>&nbsp;'+e,1e3,"#d6f481"),!e.match(s,"/gi")):e.match(shortPublisherSiteName,"/gi")?($("[name=publisher_id]").val(a).change(),func_alert('<span class="h5">Publisher: </span>&nbsp;'+e,1e3,"#d6f481"),!e.match(shortPublisherSiteName,"/gi")):($("[name=publisher_id]").val("").change(),void func_alert('<span class="h5">Publisher: Select Manually</span>',2e3,"#f4a081","#fff"))}),func_PubSelError()}function Func_AbbreviateNews(){return NewsURLNotToDo=NewsTitleToDo=NewsDscToDo=HashText="",$("#id_news ~ a.btn-danger").remove(),UndoText=HelpMeText="",UndoText=HelpMeText=$("#id_news").val(),NeedToUndo=!1,Func_RegEx(HelpMeText),NeedToUndo&&Func_CreateUndo(),$("#id_news").focus(),{NewsURLNotToDoRet:NewsURLNotToDo,NewsTitleToDoRet:NewsTitleToDo,NewsDscToDoRet:NewsDscToDo,HashTextRet:HashText}}function Func_RegEx(e){if(ToBeReplaced=e.split(/\n/),ToBeReplaced=ToBeReplaced.filter(Boolean),ToBeReplaced.length<3)return func_alert("<strong>Err...Wake up!</strong><br/>Write the news peroperly.",1200,erMsgColor),!1;HashText=$.grep(ToBeReplaced,function(e,a){return e.match("^#","")},!1),HashText=HashText.filter(Boolean),HashText=0<HashText.length?"# "+HashText.join(",").replace(/#\s?/g,"").replace(/\s{1,}/gm," ").replace(/\s?,\s?/gm,", ").trim().replace(/,[\s]*$/gm,""):"",ToBeReplaced=$.grep(ToBeReplaced,function(e,a){return e.match("^#","")},!0),RegExp("\\.$","g").test(ToBeReplaced[2])||(ToBeReplaced[2]+=".");for(var a=3;a<ToBeReplaced.length;a++)void 0===ToBeReplaced[a]||""==ToBeReplaced[a]||(ToBeReplaced[2]+=" "+(RegExp("\\.$","g").test(ToBeReplaced[a])?ToBeReplaced[a]:ToBeReplaced[a]+="."));ToBeReplaced.splice(3);var s=fetchHash(ToBeReplaced,1,HashText);HashText=s.recHashRet,ToBeReplaced[1]=s.recArrayRet[s.recElRet];var t=fetchHash(ToBeReplaced,2,HashText);HashText=t.recHashRet,ToBeReplaced[2]=t.recArrayRet[t.recElRet],NewsURLNotToDo=Func_TrimAndCrisp(ToBeReplaced[0]),NewsTitleToDo=Func_TrimAndCrisp(ToBeReplaced[1]),NewsDscToDo=Func_TrimAndCrisp(ToBeReplaced[2]),NewsURLNotToDo=NewsURLNotToDo.match("^(https?)(?:://)","gi")?NewsURLNotToDo:"http://"+NewsURLNotToDo,NewsTitleToDo=Func_RegexReplace(NewsTitleToDo,"vartitle"),NewsDscToDo=Func_RegexReplace(NewsDscToDo,"vardesc"),$("#id_news").val(NewsURLNotToDo+"\n"+NewsTitleToDo+"\n"+NewsDscToDo+(HashText?"\n"+HashText:"")),nTitleCount=NewsTitleToDo.length,sTitleMessg=nTitleCount<=75?"OK by "+(75-nTitleCount)+" char(s)":"<b>exceeds</b> by <b>"+(nTitleCount-75)+"</b> char(s)",nDescrCount=NewsDscToDo.split(" ").length,sDescrMessg=nDescrCount<=60?"OK by "+(60-nDescrCount)+" word(s)":"<b>exceeds</b> by <b>"+(nDescrCount-60)+"</b> word(s)",bgc=75<nTitleCount||60<nDescrCount?erMsgColor:okMsgColor,hmmmPrepend=/exceeds/.test(sDescrMessg)||/exceeds/.test(sTitleMessg)?'<h5 class="mb-2">Hmm...</h5>':'<h5 class="mb-2">Good!</h5>',func_alert(hmmmPrepend+"Title "+sTitleMessg+"<br>Desc "+sDescrMessg,/exceeds/.test(sDescrMessg)||/exceeds/.test(sTitleMessg)?2100:600,bgc)}function Func_RegexReplace(e,a){for(i=1;i<GlobalNewsArray.length;i++)ReplaceThis=GlobalNewsArray[i][0],ReplaceWith=GlobalNewsArray[i][1],SearchTerm=new RegExp(ReplaceThis,"gim"),NeedToUndo=!!NeedToUndo||!!e.match(SearchTerm),Replaced=e.replace(SearchTerm,ReplaceWith).trim(),e=Replaced;return"vartitle"==a?e=e.replace(/(?:^|\s)\w/g,function(e){return e.toUpperCase()}):"vardesc"==a&&(e=e.replace(/(?:^|\.\s?)\w/g,function(e){return e.toUpperCase()})),e}function Func_TrimAndCrisp(e){if(e&&void 0!==e)return TrimmedAndCrisped=$.trim(e.replace(/\s{2,}/gm," ")),TrimmedAndCrisped}function Func_CreateUndo(){$("#id_news ~ a:last-of-type()").after($("<a/>",{class:"btn btn-danger float-right",onClick:"Func_PushUndo(this);"}).html('[Alt+U]<span class="d-none d-md-inline"> Undo</span>').css("text-transform","initial"))}function Func_PushUndo(){$("#id_news").val(UndoText),$("#id_news ~ a.btn-danger").remove(),$("#id_news").focus()}function func_BetterGallery(){$(".ImageGallery.customModal .pp-cell > div").css("max-width","90%"),$(".ImageGallery.customModal .pp-cell > div h2").text("Select Image From Gallery:").addClass("h3"),$(".ImageGallery.customModal .pp-cell > div .img-container").addClass("container"),$(".ImageGallery.customModal .img-container .gallery").addClass("row align-items-center").css({height:"70vH",padding:"",display:""}),$(".ImageGallery.customModal .img-container .gallery .img").removeAttr("style").addClass("mb-3"),$(".ImageGallery.customModal .img-container .gallery .img").addClass("col-6 col-md-4 col-xl-3").removeAttr("style"),$(".ImageGallery.customModal .img-container .gallery div").not(".img").remove(),$(".ImageGallery.customModal .img-container .gallery .img a img").removeAttr("height width"),$(".ImageGallery.customModal .img-container .gallery .img a img").addClass("img-responsive").css({border:"4px solid #fff","box-shadow":"0 2px 8px rgba(0,0,0,0.5)"}),IsGalleryManaged=!0,$(".ImageGallery.customModal .img-container .gallery").css("display",""),setTimeout(function(){func_alert("Gallery ready.")},1)}$("[name=publisher_id] option").each(function(){ObjAllPublication[$(this).html().replace(/(\s)+/g,"").toLowerCase()]=$(this).val()});
function fetchHash(e,n,a){var t=/#(\w+)/gim;return t.test(e[n])&&(tempHash=e[n].match(t),tempHash=Func_TrimAndCrisp(tempHash.join(",").replace(/#\s?/g,"").replace(/\s?,\s?/gm,", ").replace(/[_]/gm," ")),0<a.replace(/#\s?/g,"").length&&(tempHash=", "+tempHash),a=(a+tempHash).replace(/,[\s]*$/gm,""),/^#/.test(a)||(a="# "+a),e[n]=e[n].replace(/#/g,"").replace(/_/g," ")),{recArrayRet:e,recElRet:n,recHashRet:a}}function func_LH_Open(){$(".LH_Container").fadeIn(200,function(){$(".LH_Box").fadeIn(200).focus()})}function func_LaweredHelp(e){$("<div/>",{class:"LH_Container",style:"display: none"}).appendTo("body"),$("<div/>",{class:"LH_Box",style:"display: none"}).appendTo(".WordData_Container"),$("<div/>",{class:"LH_Box__body"}).appendTo(".WordData_Box"),$("<a/>",{class:"btn btn-warning LH_Close",onClick:"func_LH_Close()"})}function func_LH_Close(){$(".LH_Box").fadeOut(200,function(){$(".LH_Container").fadeOut(200,function(){$(".LH_Box").remove(),$(".LH_Container").remove()})})}